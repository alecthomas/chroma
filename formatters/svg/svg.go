// Package svg contains an SVG formatter.
package svg

import (
	"bufio"
	"encoding/base64"
	"errors"
	"fmt"
	"io"
	"io/ioutil"
	"os"
	"path"
	"strings"

	"github.com/alecthomas/chroma"
)

// Liberation Mono as base64 encoded woff (SIL Open Font License)[https://en.wikipedia.org/wiki/Liberation_fonts]
var FontLiberationMono = `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`

// Option sets an option of the SVG formatter.
type Option func(f *Formatter)

// FontFamily sets the font-family.
func FontFamily(fontFamily string) Option { return func(f *Formatter) { f.fontFamily = fontFamily } }

// EmbedFontFile embeds given font file
func EmbedFontFile(fontFamily string, fileName string) (option Option, err error) {
	var format FontFormat
	switch path.Ext(fileName) {
	case ".woff":
		format = WOFF
	case ".woff2":
		format = WOFF2
	case ".ttf":
		format = TRUETYPE
	default:
		return nil, errors.New("unexpected font file suffix")
	}

	if f, err := os.Open(fileName); err == nil {
		defer f.Close()
		reader := bufio.NewReader(f)
		if content, err := ioutil.ReadAll(reader); err == nil {
			option = EmbedFont(fontFamily, base64.StdEncoding.EncodeToString(content), format)
		}
	}
	return
}

// EmbedFont embeds given base64 encoded font
func EmbedFont(fontFamily string, font string, format FontFormat) Option {
	return func(f *Formatter) { f.fontFamily = fontFamily; f.embeddedFont = font; f.fontFormat = format }
}

// New SVG formatter.
func New(options ...Option) *Formatter {
	f := &Formatter{}
	for _, option := range options {
		option(f)
	}
	return f
}

// Formatter that generates SVG.
type Formatter struct {
	fontFamily   string
	embeddedFont string
	fontFormat   FontFormat
}

func (f *Formatter) Format(w io.Writer, style *chroma.Style, iterator chroma.Iterator) (err error) {
	defer func() {
		if perr := recover(); perr != nil {
			err = perr.(error)
		}
	}()
	f.writeSVG(w, style, iterator.Tokens())
	return err
}

var svgEscaper = strings.NewReplacer(
	`&`, "&amp;",
	`<`, "&lt;",
	`>`, "&gt;",
	`"`, "&quot;",
	` `, "&#160;",
	`	`, "&#160;&#160;&#160;&#160;",
)

// EscapeString escapes special characters.
func escapeString(s string) string {
	return svgEscaper.Replace(s)
}

func (f *Formatter) writeSVG(w io.Writer, style *chroma.Style, tokens []chroma.Token) { // nolint: gocyclo
	svgStyles := f.styleToSVG(style)
	lines := chroma.SplitTokensIntoLines(tokens)

	fmt.Fprint(w, "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n")
	fmt.Fprint(w, "<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.0//EN\" \"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n")
	fmt.Fprintf(w, "<svg height=\"%d\" xmlns=\"http://www.w3.org/2000/svg\">\n", len(lines)*22)

	if f.embeddedFont != "" {
		f.writeFontStyle(w)
	}

	fmt.Fprintf(w, "<rect width=\"100%%\" height=\"100%%\" fill=\"%s\"/>\n", style.Get(chroma.Background).Background.String())
	fmt.Fprintf(w, "<g font-family=\"%s\" font-size=\"14px\" fill=\"%s\">\n", f.fontFamily, style.Get(chroma.Text).Colour.String())

	f.writeTokenBackgrounds(w, lines, style)

	for index, tokens := range lines {
		fmt.Fprintf(w, "<text x=\"0\" y=\"%d\" xml:space=\"preserve\">", (14+7)*(index+1))

		for _, token := range tokens {
			text := escapeString(token.String())
			attr := f.styleAttr(svgStyles, token.Type)
			if attr != "" {
				text = fmt.Sprintf("<tspan %s>%s</tspan>", attr, text)
			}
			fmt.Fprint(w, text)
		}
		fmt.Fprint(w, "</text>")
	}

	fmt.Fprint(w, "\n</g>\n")
	fmt.Fprint(w, "</svg>\n")
}

// There is no background attribute for text in SVG so simply calculate the position and text
// of tokens with a background color that differs from the default and add a rectangle for each before
// adding the token.
func (f *Formatter) writeTokenBackgrounds(w io.Writer, lines [][]chroma.Token, style *chroma.Style) {
	for index, tokens := range lines {
		lineLength := 0
		for _, token := range tokens {
			length := len(strings.Replace(token.String(), `	`, "    ", -1))
			tokenBackground := style.Get(token.Type).Background
			if tokenBackground.IsSet() && tokenBackground != style.Get(chroma.Background).Background {
				fmt.Fprintf(w, "<rect id=\"%s\" x=\"%d\" y=\"%d\" width=\"%d\" height=\"%d\" fill=\"%s\" />\n", escapeString(token.String()), lineLength*8, (14+7)*index+7, length*8, 14, style.Get(token.Type).Background.String())
			}
			lineLength += length
		}
	}
}

type FontFormat int

// https://transfonter.org/formats
const (
	WOFF FontFormat = iota
	WOFF2
	TRUETYPE
)

var fontFormats = [...]string{
	"woff",
	"woff2",
	"truetype",
}

func (f *Formatter) writeFontStyle(w io.Writer) {
	fmt.Fprintf(w, `<style>
@font-face {
	font-family: '%s';
	src: url(data:application/x-font-%s;charset=utf-8;base64,%s) format('%s');'
	font-weight: normal;
	font-style: normal;
}
</style>`, f.fontFamily, fontFormats[f.fontFormat], f.embeddedFont, fontFormats[f.fontFormat])
}

func (f *Formatter) styleAttr(styles map[chroma.TokenType]string, tt chroma.TokenType) string {
	if _, ok := styles[tt]; !ok {
		tt = tt.SubCategory()
		if _, ok := styles[tt]; !ok {
			tt = tt.Category()
			if _, ok := styles[tt]; !ok {
				return ""
			}
		}
	}
	return styles[tt]
}

func (f *Formatter) styleToSVG(style *chroma.Style) map[chroma.TokenType]string {
	converted := map[chroma.TokenType]string{}
	bg := style.Get(chroma.Background)
	// Convert the style.
	for t := range chroma.StandardTypes {
		entry := style.Get(t)
		if t != chroma.Background {
			entry = entry.Sub(bg)
		}
		if entry.IsZero() {
			continue
		}
		converted[t] = StyleEntryToSVG(entry)
	}
	return converted
}

// StyleEntryToSVG converts a chroma.StyleEntry to SVG attributes.
func StyleEntryToSVG(e chroma.StyleEntry) string {
	var styles []string

	if e.Colour.IsSet() {
		styles = append(styles, "fill=\""+e.Colour.String()+"\"")
	}
	if e.Bold == chroma.Yes {
		styles = append(styles, "font-weight=\"bold\"")
	}
	if e.Italic == chroma.Yes {
		styles = append(styles, "font-style=\"italic\"")
	}
	if e.Underline == chroma.Yes {
		styles = append(styles, "text-decoration=\"underline\"")
	}
	return strings.Join(styles, " ")
}
